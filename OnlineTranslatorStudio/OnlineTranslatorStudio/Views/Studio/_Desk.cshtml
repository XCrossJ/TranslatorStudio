@model TranslatorStudioClassLibrary.Class.TranslationData

<div id="desk" class="row">
    <div id="rawSection" class="col-xs-6">
        <div class="row">
            @Html.LabelFor(Model => Model.CurrentRaw, new { @class = "control-label" })
        </div>
        <div class="row">
            @Html.TextAreaFor(Model => Model.CurrentRaw, new { @class = "form-control", style = "max-width: 100%; width: 80%;" });
            @*<p>@Model.CurrentRaw</p>*@
        </div>
    </div>
    <div id="translationSection" class="col-xs-6">
        <div class="row">
            @Html.LabelFor(Model => Model.CurrentTranslation, new { @class = "control-label" })
        </div>
        <div class="row">
            @Html.TextAreaFor(Model => Model.CurrentTranslation, new { @class = "form-control", style = "max-width: 100%; width: 80%;" });
        </div>
        @*<input class="form-control" type="text" value="@Model.CurrentTranslation" />*@
    </div>
</div>

<script>
    var translationData;
    $(document).ready(function () {
        translationData = @Html.Raw(OnlineTranslatorStudio.Utilities.OnlineStudioHelper.ToJson(Model));
        console.log(translationData);
    });

    $(document).keydown(function () {
        if ((event.which == 39) & (event.altKey == true) & (event.ctrlKey == true)) {
            incrementIndex();
        }
        if ((event.which == 37) & (event.altKey == true) & (event.ctrlKey == true)) {
            decrementIndex();
        }
    });

    function incrementIndex() {
        if (translationData.currentIndex < translationData.maxIndex) {
            translationData.currentIndex++;
            reloadDesk();
        }
    }

    function decrementIndex() {
        if (translationData.currentIndex > 0) {
            translationData.currentIndex--;
            reloadDesk();
        }
    }

    function reloadDesk() {
        translationData.currentRaw = translationData.rawLines[translationData.currentIndex];
        translationData.currentTranslation = translationData.translatedLines[translationData.currentIndex];
        $("#CurrentRaw").text(translationData.currentRaw);
        $("#CurrentTranslation").text(translationData.currentTranslation);
    }
</script>